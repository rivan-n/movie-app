import { Instance, SnapshotOut, types } from "mobx-state-tree"
import { MovieModel, MovieSnapshot } from "../movie/movie"
import { withEnvironment } from "../extensions/with-environment"

/**
 * Example store containing movies
 */
export const MovieStoreModel = types
  .model("MovieStores")
  .props({
    nowPlayingMovies: types.optional(types.array(MovieModel), []),
    popularMovies: types.optional(types.array(MovieModel), []),
    topRatedMovies: types.optional(types.array(MovieModel), []),
    upcomingMovies: types.optional(types.array(MovieModel), []),
  })
  .extend(withEnvironment)
  .actions((self) => ({
    saveNowPlayingMovies: (movieSnapshots: MovieSnapshot[]) => {
      self.nowPlayingMovies.replace(movieSnapshots)
    },
    savePopularMovies: (movieSnapshots: MovieSnapshot[]) => {
      self.popularMovies.replace(movieSnapshots)
    },
    saveTopRatedMovies: (movieSnapshots: MovieSnapshot[]) => {
      self.topRatedMovies.replace(movieSnapshots)
    },
    saveUpcomingMovies: (movieSnapshots: MovieSnapshot[]) => {
      self.upcomingMovies.replace(movieSnapshots)
    },
  }))
  .actions((self) => ({
    getNowPlayingMovies: async () => {
      // TODO: Debug await callback doesn't called
      // const moviesApi = new MoviesApi(self.environment.api)
      // const result = await moviesApi.getNowPlaying()

      const response = {"dates":{"maximum":"2021-06-16","minimum":"2021-04-29"},"page":1,"results":[{"adult":false,"backdrop_path":"/6MKr3KgOLmzOP6MSuZERO41Lpkt.jpg","genre_ids":[35,80],"id":337404,"original_language":"en","original_title":"Cruella","overview":"In 1970s London amidst the punk rock revolution, a young grifter named Estella is determined to make a name for herself with her designs. She befriends a pair of young thieves who appreciate her appetite for mischief, and together they are able to build a life for themselves on the London streets. One day, Estella’s flair for fashion catches the eye of the Baroness von Hellman, a fashion legend who is devastatingly chic and terrifyingly haute. But their relationship sets in motion a course of events and revelations that will cause Estella to embrace her wicked side and become the raucous, fashionable and revenge-bent Cruella.","popularity":5507.395,"poster_path":"/rTh4K5uw9HypmpGslcKd4QfHl93.jpg","release_date":"2021-05-26","title":"Cruella","video":false,"vote_average":8.7,"vote_count":2359},{"adult":false,"backdrop_path":"/70AV2Xx5FQYj20labp0EGdbjI6E.jpg","genre_ids":[80,28],"id":637649,"original_language":"en","original_title":"Wrath of Man","overview":"A cold and mysterious new security guard for a Los Angeles cash truck company surprises his co-workers when he unleashes precision skills during a heist. The crew is left wondering who he is and where he came from. Soon, the marksman's ultimate motive becomes clear as he takes dramatic and irrevocable steps to settle a score.","popularity":2998.267,"poster_path":"/M7SUK85sKjaStg4TKhlAVyGlz3.jpg","release_date":"2021-04-22","title":"Wrath of Man","video":false,"vote_average":7.9,"vote_count":816},{"adult":false,"backdrop_path":"/jw6ASGRT2gi8EjCImpGtbiJ9NQ9.jpg","genre_ids":[27],"id":632357,"original_language":"en","original_title":"The Unholy","overview":"Alice, a young hearing-impaired girl who, after a supposed visitation from the Virgin Mary, is inexplicably able to hear, speak and heal the sick. As word spreads and people from near and far flock to witness her miracles, a disgraced journalist hoping to revive his career visits the small New England town to investigate. When terrifying events begin to happen all around, he starts to question if these phenomena are the works of the Virgin Mary or something much more sinister.","popularity":2641.99,"poster_path":"/bShgiEQoPnWdw4LBrYT5u18JF34.jpg","release_date":"2021-03-31","title":"The Unholy","video":false,"vote_average":7.1,"vote_count":869},{"adult":false,"backdrop_path":"/7JENyUT8ABxcvrcijDBVpdjgCY9.jpg","genre_ids":[27,53,9648],"id":602734,"original_language":"en","original_title":"Spiral: From the Book of Saw","overview":"Working in the shadow of an esteemed police veteran, brash Detective Ezekiel “Zeke” Banks and his rookie partner take charge of a grisly investigation into murders that are eerily reminiscent of the city’s gruesome past.  Unwittingly entrapped in a deepening mystery, Zeke finds himself at the center of the killer’s morbid game.","popularity":2463.203,"poster_path":"/lcyKve7nXRFgRyms9M1bndNkKOx.jpg","release_date":"2021-05-12","title":"Spiral: From the Book of Saw","video":false,"vote_average":6.6,"vote_count":283},{"adult":false,"backdrop_path":"/qi6Edc1OPcyENecGtz8TF0DUr9e.jpg","genre_ids":[27,9648,53],"id":423108,"original_language":"en","original_title":"The Conjuring: The Devil Made Me Do It","overview":"Paranormal investigators Ed and Lorraine Warren encounter what would become one of the most sensational cases from their files. The fight for the soul of a young boy takes them beyond anything they'd ever seen before, to mark the first time in U.S. history that a murder suspect would claim demonic possession as a defense.","popularity":3165.929,"poster_path":"/xbSuFiJbbBWCkyCCKIMfuDCA4yV.jpg","release_date":"2021-05-25","title":"The Conjuring: The Devil Made Me Do It","video":false,"vote_average":8.3,"vote_count":1631},{"adult":false,"backdrop_path":"/9WlJFhOSCPnaaSmsrv0B4zA8iUb.jpg","genre_ids":[28,27,53,80],"id":503736,"original_language":"en","original_title":"Army of the Dead","overview":"Following a zombie outbreak in Las Vegas, a group of mercenaries take the ultimate gamble: venturing into the quarantine zone to pull off the greatest heist ever attempted.","popularity":1843.187,"poster_path":"/z8CExJekGrEThbpMXAmCFvvgoJR.jpg","release_date":"2021-05-14","title":"Army of the Dead","video":false,"vote_average":6.6,"vote_count":1478},{"adult":false,"backdrop_path":"/9yBVqNruk6Ykrwc32qrK2TIE5xw.jpg","genre_ids":[28,14,12],"id":460465,"original_language":"en","original_title":"Mortal Kombat","overview":"Washed-up MMA fighter Cole Young, unaware of his heritage, and hunted by Emperor Shang Tsung's best warrior, Sub-Zero, seeks out and trains with Earth's greatest champions as he prepares to stand against the enemies of Outworld in a high stakes battle for the universe.","popularity":1707.109,"poster_path":"/nkayOAUBUu4mMvyNf9iHSUiPjF1.jpg","release_date":"2021-04-07","title":"Mortal Kombat","video":false,"vote_average":7.5,"vote_count":2943},{"adult":false,"backdrop_path":"/inJjDhCjfhh3RtrJWBmmDqeuSYC.jpg","genre_ids":[878,28,12],"id":399566,"original_language":"en","original_title":"Godzilla vs. Kong","overview":"In a time when monsters walk the Earth, humanity’s fight for its future sets Godzilla and Kong on a collision course that will see the two most powerful forces of nature on the planet collide in a spectacular battle for the ages.","popularity":1601.244,"poster_path":"/pgqgaUx1cJb5oZQQ5v0tNARCeBp.jpg","release_date":"2021-03-24","title":"Godzilla vs. Kong","video":false,"vote_average":8.1,"vote_count":5912},{"adult":false,"backdrop_path":"/ouOojiypBE6CD1aqcHPVq7cJf2R.jpg","genre_ids":[53,18,28,9648],"id":578701,"original_language":"en","original_title":"Those Who Wish Me Dead","overview":"A young boy finds himself pursued by two assassins in the Montana wilderness with a survival expert determined to protecting him - and a forest fire threatening to consume them all.","popularity":1211.91,"poster_path":"/xCEg6KowNISWvMh8GvPSxtdf9TO.jpg","release_date":"2021-05-05","title":"Those Who Wish Me Dead","video":false,"vote_average":7,"vote_count":459},{"adult":false,"backdrop_path":"/z2UtGA1WggESspi6KOXeo66lvLx.jpg","genre_ids":[878,53,27],"id":520763,"original_language":"en","original_title":"A Quiet Place Part II","overview":"Following the events at home, the Abbott family now face the terrors of the outside world. Forced to venture into the unknown, they realize that the creatures that hunt by sound are not the only threats that lurk beyond the sand path.","popularity":1599.167,"poster_path":"/4q2hz2m8hubgvijz8Ez0T2Os2Yv.jpg","release_date":"2021-05-21","title":"A Quiet Place Part II","video":false,"vote_average":7.3,"vote_count":173},{"adult":false,"backdrop_path":"/6zbKgwgaaCyyBXE4Sun4oWQfQmi.jpg","genre_ids":[80,28,53,35],"id":615457,"original_language":"en","original_title":"Nobody","overview":"Hutch Mansell, a suburban dad, overlooked husband, nothing neighbor — a \"nobody.\" When two thieves break into his home one night, Hutch's unknown long-simmering rage is ignited and propels him on a brutal path that will uncover dark secrets he fought to leave behind.","popularity":965.872,"poster_path":"/oBgWY00bEFeZ9N25wWVyuQddbAo.jpg","release_date":"2021-03-26","title":"Nobody","video":false,"vote_average":8.4,"vote_count":1955},{"adult":false,"backdrop_path":"/efrdAWS63s8TTWdrI2uNdIhn1dj.jpg","genre_ids":[53,28,80],"id":808023,"original_language":"en","original_title":"The Virtuoso","overview":"A lonesome stranger with nerves of steel must track down and kill a rogue hitman to satisfy an outstanding debt. But the only information he's been given is a time and location where to find his quarry. No name. No description. Nothing.","popularity":1013.962,"poster_path":"/vXHzO26mJaOt4VO7ZFiM6No5ScT.jpg","release_date":"2021-04-30","title":"The Virtuoso","video":false,"vote_average":6.3,"vote_count":120},{"adult":false,"backdrop_path":"/A0xW7GgeFQoQmPOn7HcHkBQ5nlb.jpg","genre_ids":[53,28],"id":817451,"original_language":"en","original_title":"Endangered Species","overview":"Jack Halsey takes his wife, their adult kids, and a friend for a dream vacation in Kenya. But as they venture off alone into a wilderness park, their safari van is flipped over by an angry rhino, leaving them injured and desperate. Then, as two of them go in search of rescue, a bloody, vicious encounter with a leopard and a clan of hyenas incites a desperate fight for survival.","popularity":1435.49,"poster_path":"/ccsSqbpEqr2KK9eMvoeF8ERFCd5.jpg","release_date":"2021-05-27","title":"Endangered Species","video":false,"vote_average":7.6,"vote_count":18},{"adult":false,"backdrop_path":"/xPpXYnCWfjkt3zzE0dpCNME1pXF.jpg","genre_ids":[14,16,28,12,18],"id":635302,"original_language":"ja","original_title":"劇場版「鬼滅の刃」無限列車編","overview":"Tanjirō Kamado, joined with Inosuke Hashibira, a boy raised by boars who wears a boar's head, and Zenitsu Agatsuma, a scared boy who reveals his true power when he sleeps, boards the Infinity Train on a new mission with the Fire Hashira, Kyōjurō Rengoku, to defeat a demon who has been tormenting the people and killing the demon slayers who oppose it!","popularity":976.56,"poster_path":"/h8Rb9gBr48ODIwYUttZNYeMWeUU.jpg","release_date":"2020-10-16","title":"Demon Slayer -Kimetsu no Yaiba- The Movie: Mugen Train","video":false,"vote_average":8.4,"vote_count":1163},{"adult":false,"backdrop_path":"/xrAaJAn3hqkInq5kE1AGJqIGXyT.jpg","genre_ids":[27],"id":573680,"original_language":"en","original_title":"The Banishing","overview":"In the 1930s, a young reverend and his family are forced to confront their worst fears when they discover their new home holds a horrifying secret.","popularity":801.277,"poster_path":"/xD9mc8JCVXA8T8u4Od7qOUBuGH4.jpg","release_date":"2021-04-29","title":"The Banishing","video":false,"vote_average":6.1,"vote_count":20},{"adult":false,"backdrop_path":"/5Zv5KmgZzdIvXz2KC3n0MyecSNL.jpg","genre_ids":[28,53,80],"id":634528,"original_language":"en","original_title":"The Marksman","overview":"Jim Hanson’s quiet life is suddenly disturbed by two people crossing the US/Mexico border – a woman and her young son – desperate to flee a Mexican cartel. After a shootout leaves the mother dead, Jim becomes the boy’s reluctant defender. He embraces his role as Miguel’s protector and will stop at nothing to get him to safety, as they go on the run from the relentless assassins.","popularity":690.609,"poster_path":"/6vcDalR50RWa309vBH1NLmG2rjQ.jpg","release_date":"2021-01-15","title":"The Marksman","video":false,"vote_average":7.4,"vote_count":554},{"adult":false,"backdrop_path":"/9ns9463dwOeo1CK1JU2wirL5Yi1.jpg","genre_ids":[35,10751,16],"id":587807,"original_language":"en","original_title":"Tom & Jerry","overview":"Tom the cat and Jerry the mouse get kicked out of their home and relocate to a fancy New York hotel, where a scrappy employee named Kayla will lose her job if she can’t evict Jerry before a high-class wedding at the hotel. Her solution? Hiring Tom to get rid of the pesky mouse.","popularity":627.252,"poster_path":"/8XZI9QZ7Pm3fVkigWJPbrXCMzjq.jpg","release_date":"2021-02-11","title":"Tom & Jerry","video":false,"vote_average":7.2,"vote_count":1466},{"adult":false,"backdrop_path":"/z8TvnEVRenMSTemxYZwLGqFofgF.jpg","genre_ids":[28,14,12],"id":458576,"original_language":"en","original_title":"Monster Hunter","overview":"A portal transports Cpt. Artemis and an elite unit of soldiers to a strange world where powerful monsters rule with deadly ferocity. Faced with relentless danger, the team encounters a mysterious hunter who may be their only hope to find a way home.","popularity":562.62,"poster_path":"/1UCOF11QCw8kcqvce8LKOO6pimh.jpg","release_date":"2020-12-03","title":"Monster Hunter","video":false,"vote_average":7,"vote_count":1716},{"adult":false,"backdrop_path":"/h9DIlghaiTxbQbt1FIwKNbQvEL.jpg","genre_ids":[28,12,53],"id":581387,"original_language":"ko","original_title":"백두산","overview":"A group of unlikely heroes from across the Korean peninsula try to save the day after a volcano erupts on the mythical and majestic Baekdu Mountain.","popularity":546.38,"poster_path":"/zoeKREZ2IdAUnXISYCS0E6H5BVh.jpg","release_date":"2019-12-19","title":"Ashfall","video":false,"vote_average":6.4,"vote_count":270},{"adult":false,"backdrop_path":"/mYM8x2Atv4MaLulaV0KVJWI1Djv.jpg","genre_ids":[28,80,53],"id":804435,"original_language":"en","original_title":"Vanquish","overview":"Victoria is a young mother trying to put her dark past as a Russian drug courier behind her, but retired cop Damon forces Victoria to do his bidding by holding her daughter hostage. Now, Victoria must use guns, guts and a motorcycle to take out a series of violent gangsters—or she may never see her child again.","popularity":526.337,"poster_path":"/AoWY1gkcNzabh229Icboa1Ff0BM.jpg","release_date":"2021-04-16","title":"Vanquish","video":false,"vote_average":6,"vote_count":115}],"total_pages":48,"total_results":951}
      const result = {
        kind: "ok",
        movies: response.results
      }

      if (result.kind === "ok") {
        self.saveNowPlayingMovies(result.movies)
      } else {
        __DEV__ && console.tron.log(result.kind)
      }
    },
    getPopularMovies: async () => {
      // TODO: Debug await callback doesn't called
      // const moviesApi = new MoviesApi(self.environment.api)
      // const result = await moviesApi.getPopular()

      const response = {"page":1,"results":[{"adult":false,"backdrop_path":"/6MKr3KgOLmzOP6MSuZERO41Lpkt.jpg","genre_ids":[35,80],"id":337404,"original_language":"en","original_title":"Cruella","overview":"In 1970s London amidst the punk rock revolution, a young grifter named Estella is determined to make a name for herself with her designs. She befriends a pair of young thieves who appreciate her appetite for mischief, and together they are able to build a life for themselves on the London streets. One day, Estella’s flair for fashion catches the eye of the Baroness von Hellman, a fashion legend who is devastatingly chic and terrifyingly haute. But their relationship sets in motion a course of events and revelations that will cause Estella to embrace her wicked side and become the raucous, fashionable and revenge-bent Cruella.","popularity":5507.395,"poster_path":"/rTh4K5uw9HypmpGslcKd4QfHl93.jpg","release_date":"2021-05-26","title":"Cruella","video":false,"vote_average":8.7,"vote_count":2359},{"adult":false,"backdrop_path":"/70AV2Xx5FQYj20labp0EGdbjI6E.jpg","genre_ids":[80,28],"id":637649,"original_language":"en","original_title":"Wrath of Man","overview":"A cold and mysterious new security guard for a Los Angeles cash truck company surprises his co-workers when he unleashes precision skills during a heist. The crew is left wondering who he is and where he came from. Soon, the marksman's ultimate motive becomes clear as he takes dramatic and irrevocable steps to settle a score.","popularity":2998.267,"poster_path":"/M7SUK85sKjaStg4TKhlAVyGlz3.jpg","release_date":"2021-04-22","title":"Wrath of Man","video":false,"vote_average":7.9,"vote_count":816},{"adult":false,"backdrop_path":"/jw6ASGRT2gi8EjCImpGtbiJ9NQ9.jpg","genre_ids":[27],"id":632357,"original_language":"en","original_title":"The Unholy","overview":"Alice, a young hearing-impaired girl who, after a supposed visitation from the Virgin Mary, is inexplicably able to hear, speak and heal the sick. As word spreads and people from near and far flock to witness her miracles, a disgraced journalist hoping to revive his career visits the small New England town to investigate. When terrifying events begin to happen all around, he starts to question if these phenomena are the works of the Virgin Mary or something much more sinister.","popularity":2641.99,"poster_path":"/bShgiEQoPnWdw4LBrYT5u18JF34.jpg","release_date":"2021-03-31","title":"The Unholy","video":false,"vote_average":7.1,"vote_count":869},{"adult":false,"backdrop_path":"/7JENyUT8ABxcvrcijDBVpdjgCY9.jpg","genre_ids":[27,53,9648],"id":602734,"original_language":"en","original_title":"Spiral: From the Book of Saw","overview":"Working in the shadow of an esteemed police veteran, brash Detective Ezekiel “Zeke” Banks and his rookie partner take charge of a grisly investigation into murders that are eerily reminiscent of the city’s gruesome past.  Unwittingly entrapped in a deepening mystery, Zeke finds himself at the center of the killer’s morbid game.","popularity":2463.203,"poster_path":"/lcyKve7nXRFgRyms9M1bndNkKOx.jpg","release_date":"2021-05-12","title":"Spiral: From the Book of Saw","video":false,"vote_average":6.6,"vote_count":283},{"adult":false,"backdrop_path":"/qi6Edc1OPcyENecGtz8TF0DUr9e.jpg","genre_ids":[27,9648,53],"id":423108,"original_language":"en","original_title":"The Conjuring: The Devil Made Me Do It","overview":"Paranormal investigators Ed and Lorraine Warren encounter what would become one of the most sensational cases from their files. The fight for the soul of a young boy takes them beyond anything they'd ever seen before, to mark the first time in U.S. history that a murder suspect would claim demonic possession as a defense.","popularity":3165.929,"poster_path":"/xbSuFiJbbBWCkyCCKIMfuDCA4yV.jpg","release_date":"2021-05-25","title":"The Conjuring: The Devil Made Me Do It","video":false,"vote_average":8.3,"vote_count":1631},{"adult":false,"backdrop_path":"/9WlJFhOSCPnaaSmsrv0B4zA8iUb.jpg","genre_ids":[28,27,53,80],"id":503736,"original_language":"en","original_title":"Army of the Dead","overview":"Following a zombie outbreak in Las Vegas, a group of mercenaries take the ultimate gamble: venturing into the quarantine zone to pull off the greatest heist ever attempted.","popularity":1843.187,"poster_path":"/z8CExJekGrEThbpMXAmCFvvgoJR.jpg","release_date":"2021-05-14","title":"Army of the Dead","video":false,"vote_average":6.6,"vote_count":1478},{"adult":false,"backdrop_path":"/9yBVqNruk6Ykrwc32qrK2TIE5xw.jpg","genre_ids":[28,14,12],"id":460465,"original_language":"en","original_title":"Mortal Kombat","overview":"Washed-up MMA fighter Cole Young, unaware of his heritage, and hunted by Emperor Shang Tsung's best warrior, Sub-Zero, seeks out and trains with Earth's greatest champions as he prepares to stand against the enemies of Outworld in a high stakes battle for the universe.","popularity":1707.109,"poster_path":"/nkayOAUBUu4mMvyNf9iHSUiPjF1.jpg","release_date":"2021-04-07","title":"Mortal Kombat","video":false,"vote_average":7.5,"vote_count":2943},{"adult":false,"backdrop_path":"/inJjDhCjfhh3RtrJWBmmDqeuSYC.jpg","genre_ids":[878,28,12],"id":399566,"original_language":"en","original_title":"Godzilla vs. Kong","overview":"In a time when monsters walk the Earth, humanity’s fight for its future sets Godzilla and Kong on a collision course that will see the two most powerful forces of nature on the planet collide in a spectacular battle for the ages.","popularity":1601.244,"poster_path":"/pgqgaUx1cJb5oZQQ5v0tNARCeBp.jpg","release_date":"2021-03-24","title":"Godzilla vs. Kong","video":false,"vote_average":8.1,"vote_count":5912},{"adult":false,"backdrop_path":"/fPGeS6jgdLovQAKunNHX8l0avCy.jpg","genre_ids":[28,53,10752],"id":567189,"original_language":"en","original_title":"Tom Clancy's Without Remorse","overview":"An elite Navy SEAL uncovers an international conspiracy while seeking justice for the murder of his pregnant wife.","popularity":1334.515,"poster_path":"/rEm96ib0sPiZBADNKBHKBv5bve9.jpg","release_date":"2021-04-29","title":"Tom Clancy's Without Remorse","video":false,"vote_average":7.2,"vote_count":1136},{"adult":false,"backdrop_path":"/ouOojiypBE6CD1aqcHPVq7cJf2R.jpg","genre_ids":[53,18,28,9648],"id":578701,"original_language":"en","original_title":"Those Who Wish Me Dead","overview":"A young boy finds himself pursued by two assassins in the Montana wilderness with a survival expert determined to protecting him - and a forest fire threatening to consume them all.","popularity":1211.91,"poster_path":"/xCEg6KowNISWvMh8GvPSxtdf9TO.jpg","release_date":"2021-05-05","title":"Those Who Wish Me Dead","video":false,"vote_average":7,"vote_count":459},{"adult":false,"backdrop_path":"/z2UtGA1WggESspi6KOXeo66lvLx.jpg","genre_ids":[878,53,27],"id":520763,"original_language":"en","original_title":"A Quiet Place Part II","overview":"Following the events at home, the Abbott family now face the terrors of the outside world. Forced to venture into the unknown, they realize that the creatures that hunt by sound are not the only threats that lurk beyond the sand path.","popularity":1599.167,"poster_path":"/4q2hz2m8hubgvijz8Ez0T2Os2Yv.jpg","release_date":"2021-05-21","title":"A Quiet Place Part II","video":false,"vote_average":7.3,"vote_count":173},{"adult":false,"backdrop_path":"/pcDc2WJAYGJTTvRSEIpRZwM3Ola.jpg","genre_ids":[28,12,14,878],"id":791373,"original_language":"en","original_title":"Zack Snyder's Justice League","overview":"Determined to ensure Superman's ultimate sacrifice was not in vain, Bruce Wayne aligns forces with Diana Prince with plans to recruit a team of metahumans to protect the world from an approaching threat of catastrophic proportions.","popularity":1065.453,"poster_path":"/tnAuB8q5vv7Ax9UAEje5Xi4BXik.jpg","release_date":"2021-03-18","title":"Zack Snyder's Justice League","video":false,"vote_average":8.5,"vote_count":5732},{"adult":false,"backdrop_path":"/hJuDvwzS0SPlsE6MNFOpznQltDZ.jpg","genre_ids":[16,12,14,10751,28],"id":527774,"original_language":"en","original_title":"Raya and the Last Dragon","overview":"Long ago, in the fantasy world of Kumandra, humans and dragons lived together in harmony. But when an evil force threatened the land, the dragons sacrificed themselves to save humanity. Now, 500 years later, that same evil has returned and it’s up to a lone warrior, Raya, to track down the legendary last dragon to restore the fractured land and its divided people.","popularity":1069.515,"poster_path":"/lPsD10PP4rgUGiGR4CCXA6iY0QQ.jpg","release_date":"2021-03-03","title":"Raya and the Last Dragon","video":false,"vote_average":8.2,"vote_count":3246},{"adult":false,"backdrop_path":"/6zbKgwgaaCyyBXE4Sun4oWQfQmi.jpg","genre_ids":[80,28,53,35],"id":615457,"original_language":"en","original_title":"Nobody","overview":"Hutch Mansell, a suburban dad, overlooked husband, nothing neighbor — a \"nobody.\" When two thieves break into his home one night, Hutch's unknown long-simmering rage is ignited and propels him on a brutal path that will uncover dark secrets he fought to leave behind.","popularity":965.872,"poster_path":"/oBgWY00bEFeZ9N25wWVyuQddbAo.jpg","release_date":"2021-03-26","title":"Nobody","video":false,"vote_average":8.4,"vote_count":1955},{"adult":false,"backdrop_path":"/yyWNPhP1HR4BTLErHcZwIUsMBvA.jpg","genre_ids":[80,18,9648,53],"id":823855,"original_language":"en","original_title":"I Am All Girls","overview":"A special crimes investigator forms an unlikely bond with a serial killer to bring down a global child sex trafficking syndicate.","popularity":984.165,"poster_path":"/m6bUeV4mczG3z2YXXr5XDKPsQzv.jpg","release_date":"2021-05-14","title":"I Am All Girls","video":false,"vote_average":6.7,"vote_count":107},{"adult":false,"backdrop_path":"/efrdAWS63s8TTWdrI2uNdIhn1dj.jpg","genre_ids":[53,28,80],"id":808023,"original_language":"en","original_title":"The Virtuoso","overview":"A lonesome stranger with nerves of steel must track down and kill a rogue hitman to satisfy an outstanding debt. But the only information he's been given is a time and location where to find his quarry. No name. No description. Nothing.","popularity":1013.962,"poster_path":"/vXHzO26mJaOt4VO7ZFiM6No5ScT.jpg","release_date":"2021-04-30","title":"The Virtuoso","video":false,"vote_average":6.3,"vote_count":120},{"adult":false,"backdrop_path":"/A0xW7GgeFQoQmPOn7HcHkBQ5nlb.jpg","genre_ids":[53,28],"id":817451,"original_language":"en","original_title":"Endangered Species","overview":"Jack Halsey takes his wife, their adult kids, and a friend for a dream vacation in Kenya. But as they venture off alone into a wilderness park, their safari van is flipped over by an angry rhino, leaving them injured and desperate. Then, as two of them go in search of rescue, a bloody, vicious encounter with a leopard and a clan of hyenas incites a desperate fight for survival.","popularity":1435.49,"poster_path":"/ccsSqbpEqr2KK9eMvoeF8ERFCd5.jpg","release_date":"2021-05-27","title":"Endangered Species","video":false,"vote_average":7.6,"vote_count":18},{"adult":false,"backdrop_path":"/xPpXYnCWfjkt3zzE0dpCNME1pXF.jpg","genre_ids":[14,16,28,12,18],"id":635302,"original_language":"ja","original_title":"劇場版「鬼滅の刃」無限列車編","overview":"Tanjirō Kamado, joined with Inosuke Hashibira, a boy raised by boars who wears a boar's head, and Zenitsu Agatsuma, a scared boy who reveals his true power when he sleeps, boards the Infinity Train on a new mission with the Fire Hashira, Kyōjurō Rengoku, to defeat a demon who has been tormenting the people and killing the demon slayers who oppose it!","popularity":976.56,"poster_path":"/h8Rb9gBr48ODIwYUttZNYeMWeUU.jpg","release_date":"2020-10-16","title":"Demon Slayer -Kimetsu no Yaiba- The Movie: Mugen Train","video":false,"vote_average":8.4,"vote_count":1163},{"adult":false,"backdrop_path":"/rlNnwObbMu5G2FaOUlacnUIdIIA.jpg","genre_ids":[16,35,10751,12],"id":726684,"original_language":"fr","original_title":"Miraculous World: Shanghai, la légende de Ladydragon","overview":"On school break, Marinette heads to Shanghai to meet Adrien. But after arriving, Marinette loses all her stuff, including the Miraculous that allows her to turn into Ladybug!","popularity":934.03,"poster_path":"/msI5a9TPnepx47JUb2vl88hb80R.jpg","release_date":"2021-04-04","title":"Miraculous World: Shanghai – The Legend of Ladydragon","video":false,"vote_average":7.9,"vote_count":390},{"adult":false,"backdrop_path":"/xrAaJAn3hqkInq5kE1AGJqIGXyT.jpg","genre_ids":[27],"id":573680,"original_language":"en","original_title":"The Banishing","overview":"In the 1930s, a young reverend and his family are forced to confront their worst fears when they discover their new home holds a horrifying secret.","popularity":801.277,"poster_path":"/xD9mc8JCVXA8T8u4Od7qOUBuGH4.jpg","release_date":"2021-04-29","title":"The Banishing","video":false,"vote_average":6.1,"vote_count":20}],"total_pages":500,"total_results":10000}
      const result = {
        kind: "ok",
        movies: response.results
      }

      if (result.kind === "ok") {
        self.savePopularMovies(result.movies)
      } else {
        __DEV__ && console.tron.log(result.kind)
      }
    },
    getTopRatedMovies: async () => {
      // TODO: Debug await callback doesn't called
      // const moviesApi = new MoviesApi(self.environment.api)
      // const result = await moviesApi.getTopRated()

      const response = {"page":1,"results":[{"adult":false,"backdrop_path":"/gNBCvtYyGPbjPCT1k3MvJuNuXR6.jpg","genre_ids":[35,18,10749],"id":19404,"original_language":"hi","original_title":"दिलवाले दुल्हनिया ले जायेंगे","overview":"Raj is a rich, carefree, happy-go-lucky second generation NRI. Simran is the daughter of Chaudhary Baldev Singh, who in spite of being an NRI is very strict about adherence to Indian values. Simran has left for India to be married to her childhood fiancé. Raj leaves for India with a mission at his hands, to claim his lady love under the noses of her whole family. Thus begins a saga.","popularity":15.001,"poster_path":"/2CAL2433ZeIihfX1Hb2139CX0pW.jpg","release_date":"1995-10-20","title":"Dilwale Dulhania Le Jayenge","video":false,"vote_average":8.7,"vote_count":2928},{"adult":false,"backdrop_path":"/irlfhYtHfhZuYpsq2LAoh308NFe.jpg","genre_ids":[18,80],"id":278,"original_language":"en","original_title":"The Shawshank Redemption","overview":"Framed in the 1940s for the double murder of his wife and her lover, upstanding banker Andy Dufresne begins a new life at the Shawshank prison, where he puts his accounting skills to work for an amoral warden. During his long stretch in prison, Dufresne comes to be admired by the other inmates -- including an older prisoner named Red -- for his integrity and unquenchable sense of hope.","popularity":53.75,"poster_path":"/q6y0Go1tsGEsmtFryDOJo3dEmqu.jpg","release_date":"1994-09-23","title":"The Shawshank Redemption","video":false,"vote_average":8.7,"vote_count":19054},{"adult":false,"backdrop_path":"/jtAI6OJIWLWiRItNSZoWjrsUtmi.jpg","genre_ids":[10749],"id":724089,"original_language":"en","original_title":"Gabriel's Inferno Part II","overview":"Professor Gabriel Emerson finally learns the truth about Julia Mitchell's identity, but his realization comes a moment too late. Julia is done waiting for the well-respected Dante specialist to remember her and wants nothing more to do with him. Can Gabriel win back her heart before she finds love in another's arms?","popularity":6.962,"poster_path":"/x5o8cLZfEXMoZczTYWLrUo1P7UJ.jpg","release_date":"2020-07-31","title":"Gabriel's Inferno Part II","video":false,"vote_average":8.7,"vote_count":1266},{"adult":false,"backdrop_path":"/rSPw7tgCH9c6NqICZef4kZjFOQ5.jpg","genre_ids":[18,80],"id":238,"original_language":"en","original_title":"The Godfather","overview":"Spanning the years 1945 to 1955, a chronicle of the fictional Italian-American Corleone crime family. When organized crime family patriarch, Vito Corleone barely survives an attempt on his life, his youngest son, Michael steps in to take care of the would-be killers, launching a campaign of bloody revenge.","popularity":43.163,"poster_path":"/3bhkrj58Vtu7enYsRolD1fZdja1.jpg","release_date":"1972-03-14","title":"The Godfather","video":false,"vote_average":8.7,"vote_count":14382},{"adult":false,"backdrop_path":"/6MKr3KgOLmzOP6MSuZERO41Lpkt.jpg","genre_ids":[35,80],"id":337404,"original_language":"en","original_title":"Cruella","overview":"In 1970s London amidst the punk rock revolution, a young grifter named Estella is determined to make a name for herself with her designs. She befriends a pair of young thieves who appreciate her appetite for mischief, and together they are able to build a life for themselves on the London streets. One day, Estella’s flair for fashion catches the eye of the Baroness von Hellman, a fashion legend who is devastatingly chic and terrifyingly haute. But their relationship sets in motion a course of events and revelations that will cause Estella to embrace her wicked side and become the raucous, fashionable and revenge-bent Cruella.","popularity":5507.395,"poster_path":"/rTh4K5uw9HypmpGslcKd4QfHl93.jpg","release_date":"2021-05-26","title":"Cruella","video":false,"vote_average":8.7,"vote_count":2359},{"adult":false,"backdrop_path":"/fQq1FWp1rC89xDrRMuyFJdFUdMd.jpg","genre_ids":[10749,35],"id":761053,"original_language":"en","original_title":"Gabriel's Inferno Part III","overview":"The final part of the film adaption of the erotic romance novel Gabriel's Inferno written by an anonymous Canadian author under the pen name Sylvain Reynard.","popularity":18.526,"poster_path":"/fYtHxTxlhzD4QWfEbrC1rypysSD.jpg","release_date":"2020-11-19","title":"Gabriel's Inferno Part III","video":false,"vote_average":8.7,"vote_count":823},{"adult":false,"backdrop_path":"/w2uGvCpMtvRqZg6waC1hvLyZoJa.jpg","genre_ids":[10749],"id":696374,"original_language":"en","original_title":"Gabriel's Inferno","overview":"An intriguing and sinful exploration of seduction, forbidden love, and redemption, Gabriel's Inferno is a captivating and wildly passionate tale of one man's escape from his own personal hell as he tries to earn the impossible--forgiveness and love.","popularity":7.569,"poster_path":"/oyG9TL7FcRP4EZ9Vid6uKzwdndz.jpg","release_date":"2020-05-29","title":"Gabriel's Inferno","video":false,"vote_average":8.7,"vote_count":2053},{"adult":false,"backdrop_path":"/loRmRzQXZeqG78TqZuyvSlEQfZb.jpg","genre_ids":[18,36,10752],"id":424,"original_language":"en","original_title":"Schindler's List","overview":"The true story of how businessman Oskar Schindler saved over a thousand Jewish lives from the Nazis while they worked as slaves in his factory during World War II.","popularity":30.513,"poster_path":"/sF1U4EUQS8YHUYjNl3pMGNIQyr0.jpg","release_date":"1993-11-30","title":"Schindler's List","video":false,"vote_average":8.6,"vote_count":11447},{"adult":false,"backdrop_path":"/3ggZWEoa2aegF6AYyjyNRm8noM5.jpg","genre_ids":[18,80],"id":240,"original_language":"en","original_title":"The Godfather: Part II","overview":"In the continuing saga of the Corleone crime family, a young Vito Corleone grows up in Sicily and in 1910s New York. In the 1950s, Michael Corleone attempts to expand the family business into Las Vegas, Hollywood and Cuba.","popularity":31.097,"poster_path":"/hek3koDUyRQk7FIhPXsa6mT2Zc3.jpg","release_date":"1974-12-20","title":"The Godfather: Part II","video":false,"vote_average":8.6,"vote_count":8589},{"adult":false,"backdrop_path":"/dIWwZW7dJJtqC6CgWzYkNVKIUm8.jpg","genre_ids":[10749,16,18],"id":372058,"original_language":"ja","original_title":"君の名は。","overview":"High schoolers Mitsuha and Taki are complete strangers living separate lives. But one night, they suddenly switch places. Mitsuha wakes up in Taki’s body, and he in hers. This bizarre occurrence continues to happen randomly, and the two must adjust their lives around each other.","popularity":114.889,"poster_path":"/q719jXXEzOoYaps6babgKnONONX.jpg","release_date":"2016-08-26","title":"Your Name.","video":false,"vote_average":8.6,"vote_count":7536},{"adult":false,"backdrop_path":"/Ab8mkHmkYADjU7wQiOkia9BzGvS.jpg","genre_ids":[16,10751,14],"id":129,"original_language":"ja","original_title":"千と千尋の神隠し","overview":"A young girl, Chihiro, becomes trapped in a strange new world of spirits. When her parents undergo a mysterious transformation, she must call upon the courage she never knew she had to free her family.","popularity":55.424,"poster_path":"/39wmItIWsg5sZMyRUHLkWBcuVCM.jpg","release_date":"2001-07-20","title":"Spirited Away","video":false,"vote_average":8.5,"vote_count":11423},{"adult":false,"backdrop_path":"/TU9NIjwzjoKPwQHoHshkFcQUCG.jpg","genre_ids":[35,53,18],"id":496243,"original_language":"ko","original_title":"기생충","overview":"All unemployed, Ki-taek's family takes peculiar interest in the wealthy and glamorous Parks for their livelihood until they get entangled in an unexpected incident.","popularity":114.235,"poster_path":"/7IiTTgloJzvGI1TAYymCfbfl3vT.jpg","release_date":"2019-05-30","title":"Parasite","video":false,"vote_average":8.5,"vote_count":11495},{"adult":false,"backdrop_path":"/88J6waYVTta8Qz3iX3qUeWNA5d5.jpg","genre_ids":[18,10749],"id":447362,"original_language":"en","original_title":"Life in a Year","overview":"A 17 year old finds out that his girlfriend is dying, so he sets out to give her an entire life, in the last year she has left.","popularity":89.839,"poster_path":"/7EuZIYEHLTu1G69maFLwg13u5iB.jpg","release_date":"2020-11-27","title":"Life in a Year","video":false,"vote_average":8.5,"vote_count":609},{"adult":false,"backdrop_path":"/5Nz25DPXfQaSpDgce42Y3kFg9G4.jpg","genre_ids":[14,18,80],"id":497,"original_language":"en","original_title":"The Green Mile","overview":"A supernatural tale set on death row in a Southern prison, where gentle giant John Coffey possesses the mysterious power to heal people's ailments. When the cell block's head guard, Paul Edgecomb, recognizes Coffey's miraculous gift, he tries desperately to help stave off the condemned man's execution.","popularity":39.051,"poster_path":"/velWPhVMQeQKcxggNEU8YmIo52R.jpg","release_date":"1999-12-10","title":"The Green Mile","video":false,"vote_average":8.5,"vote_count":12343},{"adult":false,"backdrop_path":"/9guoVF7zayiiUq5ulKQpt375VIy.jpg","genre_ids":[16,28,14,12],"id":592350,"original_language":"ja","original_title":"僕のヒーローアカデミア THE MOVIE ヒーローズ：ライジング","overview":"Class 1-A visits Nabu Island where they finally get to do some real hero work. The place is so peaceful that it's more like a vacation … until they're attacked by a villain with an unfathomable Quirk! His power is eerily familiar, and it looks like Shigaraki had a hand in the plan. But with All Might retired and citizens' lives on the line, there's no time for questions. Deku and his friends are the next generation of heroes, and they're the island's only hope.","popularity":324.082,"poster_path":"/zGVbrulkupqpbwgiNedkJPyQum4.jpg","release_date":"2019-12-20","title":"My Hero Academia: Heroes Rising","video":false,"vote_average":8.5,"vote_count":726},{"adult":false,"backdrop_path":"/myl723CISgGA6dhEzewbOSkD19E.jpg","genre_ids":[16,10751,12,14],"id":441130,"original_language":"en","original_title":"Wolfwalkers","overview":"In a time of superstition and magic, when wolves are seen as demonic and nature an evil to be tamed, a young apprentice hunter comes to Ireland with her father to wipe out the last pack. But when she saves a wild native girl, their friendship leads her to discover the world of the Wolfwalkers and transform her into the very thing her father is tasked to destroy.","popularity":17.644,"poster_path":"/uRkDrsKwCCZC9zdHZs2CFTt1ATZ.jpg","release_date":"2020-10-26","title":"Wolfwalkers","video":false,"vote_average":8.5,"vote_count":469},{"adult":false,"backdrop_path":"/suaEOtk1N1sgg2MTM7oZd2cfVp3.jpg","genre_ids":[53,80],"id":680,"original_language":"en","original_title":"Pulp Fiction","overview":"A burger-loving hit man, his philosophical partner, a drug-addled gangster's moll and a washed-up boxer converge in this sprawling, comedic crime caper. Their adventures unfurl in three stories that ingeniously trip back and forth in time.","popularity":41.299,"poster_path":"/d5iIlFn5s0ImszYzBPb8JPIfbXD.jpg","release_date":"1994-09-10","title":"Pulp Fiction","video":false,"vote_average":8.5,"vote_count":21215},{"adult":false,"backdrop_path":"/qqHQsStV6exghCM7zbObuYBiYxw.jpg","genre_ids":[18],"id":389,"original_language":"en","original_title":"12 Angry Men","overview":"The defense and the prosecution have rested and the jury is filing into the jury room to decide if a young Spanish-American is guilty or innocent of murdering his father. What begins as an open and shut case soon becomes a mini-drama of each of the jurors' prejudices and preconceptions about the trial, the accused, and each other.","popularity":20.385,"poster_path":"/ppd84D2i9W8jXmsyInGyihiSyqz.jpg","release_date":"1957-04-10","title":"12 Angry Men","video":false,"vote_average":8.5,"vote_count":5621},{"adult":false,"backdrop_path":"/pm0RiwNpSja8gR0BTWpxo5a9Bbl.jpg","genre_ids":[12,14,28],"id":122,"original_language":"en","original_title":"The Lord of the Rings: The Return of the King","overview":"Aragorn is revealed as the heir to the ancient kings as he, Gandalf and the other members of the broken fellowship struggle to save Gondor from Sauron's forces. Meanwhile, Frodo and Sam take the ring closer to the heart of Mordor, the dark lord's realm.","popularity":58.775,"poster_path":"/rCzpDGLbOoPwLjy3OAm5NUPOTrC.jpg","release_date":"2003-12-01","title":"The Lord of the Rings: The Return of the King","video":false,"vote_average":8.5,"vote_count":17722},{"adult":false,"backdrop_path":"/1fOsyhVz5qyX2rl1qqX6KImVhTx.jpg","genre_ids":[18,35],"id":644479,"original_language":"es","original_title":"Dedicada a mi ex","overview":"The film tells the story of Ariel, a 21-year-old who decides to form a rock band to compete for a prize of ten thousand dollars in a musical band contest, this as a last option when trying to get money to save their relationship and reunite with his ex-girlfriend, which breaks due to the trip she must make to Finland for an internship. Ariel with her friend Ortega, decides to make a casting to find the other members of the band, although they do not know nothing about music, thus forming a band with members that have diverse and opposite personalities.","popularity":22.939,"poster_path":"/riAooJrFvVhotyaOgoI0WR7okSe.jpg","release_date":"2019-11-01","title":"Dedicated to my ex","video":false,"vote_average":8.5,"vote_count":391}],"total_pages":440,"total_results":8800}
      const result = {
        kind: "ok",
        movies: response.results
      }

      if (result.kind === "ok") {
        self.saveTopRatedMovies(result.movies)
      } else {
        __DEV__ && console.tron.log(result.kind)
      }
    },
    getUpcomingMovies: async () => {
      // TODO: Debug await callback doesn't called
      // const moviesApi = new MoviesApi(self.environment.api)
      // const result = await moviesApi.getUpcoming()

      const response = {"dates":{"maximum":"2021-07-06","minimum":"2021-06-17"},"page":1,"results":[{"adult":false,"backdrop_path":"/6MKr3KgOLmzOP6MSuZERO41Lpkt.jpg","genre_ids":[35,80],"id":337404,"original_language":"en","original_title":"Cruella","overview":"In 1970s London amidst the punk rock revolution, a young grifter named Estella is determined to make a name for herself with her designs. She befriends a pair of young thieves who appreciate her appetite for mischief, and together they are able to build a life for themselves on the London streets. One day, Estella’s flair for fashion catches the eye of the Baroness von Hellman, a fashion legend who is devastatingly chic and terrifyingly haute. But their relationship sets in motion a course of events and revelations that will cause Estella to embrace her wicked side and become the raucous, fashionable and revenge-bent Cruella.","popularity":5507.395,"poster_path":"/rTh4K5uw9HypmpGslcKd4QfHl93.jpg","release_date":"2021-05-26","title":"Cruella","video":false,"vote_average":8.7,"vote_count":2359},{"adult":false,"backdrop_path":"/jw6ASGRT2gi8EjCImpGtbiJ9NQ9.jpg","genre_ids":[27],"id":632357,"original_language":"en","original_title":"The Unholy","overview":"Alice, a young hearing-impaired girl who, after a supposed visitation from the Virgin Mary, is inexplicably able to hear, speak and heal the sick. As word spreads and people from near and far flock to witness her miracles, a disgraced journalist hoping to revive his career visits the small New England town to investigate. When terrifying events begin to happen all around, he starts to question if these phenomena are the works of the Virgin Mary or something much more sinister.","popularity":2641.99,"poster_path":"/bShgiEQoPnWdw4LBrYT5u18JF34.jpg","release_date":"2021-03-31","title":"The Unholy","video":false,"vote_average":7.1,"vote_count":869},{"adult":false,"backdrop_path":"/7JENyUT8ABxcvrcijDBVpdjgCY9.jpg","genre_ids":[27,53,9648],"id":602734,"original_language":"en","original_title":"Spiral: From the Book of Saw","overview":"Working in the shadow of an esteemed police veteran, brash Detective Ezekiel “Zeke” Banks and his rookie partner take charge of a grisly investigation into murders that are eerily reminiscent of the city’s gruesome past.  Unwittingly entrapped in a deepening mystery, Zeke finds himself at the center of the killer’s morbid game.","popularity":2463.203,"poster_path":"/lcyKve7nXRFgRyms9M1bndNkKOx.jpg","release_date":"2021-05-12","title":"Spiral: From the Book of Saw","video":false,"vote_average":6.6,"vote_count":283},{"adult":false,"backdrop_path":"/qi6Edc1OPcyENecGtz8TF0DUr9e.jpg","genre_ids":[27,9648,53],"id":423108,"original_language":"en","original_title":"The Conjuring: The Devil Made Me Do It","overview":"Paranormal investigators Ed and Lorraine Warren encounter what would become one of the most sensational cases from their files. The fight for the soul of a young boy takes them beyond anything they'd ever seen before, to mark the first time in U.S. history that a murder suspect would claim demonic possession as a defense.","popularity":3165.929,"poster_path":"/xbSuFiJbbBWCkyCCKIMfuDCA4yV.jpg","release_date":"2021-05-25","title":"The Conjuring: The Devil Made Me Do It","video":false,"vote_average":8.3,"vote_count":1631},{"adult":false,"backdrop_path":"/9yBVqNruk6Ykrwc32qrK2TIE5xw.jpg","genre_ids":[28,14,12],"id":460465,"original_language":"en","original_title":"Mortal Kombat","overview":"Washed-up MMA fighter Cole Young, unaware of his heritage, and hunted by Emperor Shang Tsung's best warrior, Sub-Zero, seeks out and trains with Earth's greatest champions as he prepares to stand against the enemies of Outworld in a high stakes battle for the universe.","popularity":1707.109,"poster_path":"/nkayOAUBUu4mMvyNf9iHSUiPjF1.jpg","release_date":"2021-04-07","title":"Mortal Kombat","video":false,"vote_average":7.5,"vote_count":2943},{"adult":false,"backdrop_path":"/ouOojiypBE6CD1aqcHPVq7cJf2R.jpg","genre_ids":[53,18,28,9648],"id":578701,"original_language":"en","original_title":"Those Who Wish Me Dead","overview":"A young boy finds himself pursued by two assassins in the Montana wilderness with a survival expert determined to protecting him - and a forest fire threatening to consume them all.","popularity":1211.91,"poster_path":"/xCEg6KowNISWvMh8GvPSxtdf9TO.jpg","release_date":"2021-05-05","title":"Those Who Wish Me Dead","video":false,"vote_average":7,"vote_count":459},{"adult":false,"backdrop_path":"/z2UtGA1WggESspi6KOXeo66lvLx.jpg","genre_ids":[878,53,27],"id":520763,"original_language":"en","original_title":"A Quiet Place Part II","overview":"Following the events at home, the Abbott family now face the terrors of the outside world. Forced to venture into the unknown, they realize that the creatures that hunt by sound are not the only threats that lurk beyond the sand path.","popularity":1599.167,"poster_path":"/4q2hz2m8hubgvijz8Ez0T2Os2Yv.jpg","release_date":"2021-05-21","title":"A Quiet Place Part II","video":false,"vote_average":7.3,"vote_count":173},{"adult":false,"backdrop_path":"/hJuDvwzS0SPlsE6MNFOpznQltDZ.jpg","genre_ids":[16,12,14,10751,28],"id":527774,"original_language":"en","original_title":"Raya and the Last Dragon","overview":"Long ago, in the fantasy world of Kumandra, humans and dragons lived together in harmony. But when an evil force threatened the land, the dragons sacrificed themselves to save humanity. Now, 500 years later, that same evil has returned and it’s up to a lone warrior, Raya, to track down the legendary last dragon to restore the fractured land and its divided people.","popularity":1069.515,"poster_path":"/lPsD10PP4rgUGiGR4CCXA6iY0QQ.jpg","release_date":"2021-03-03","title":"Raya and the Last Dragon","video":false,"vote_average":8.2,"vote_count":3246},{"adult":false,"backdrop_path":"/6zbKgwgaaCyyBXE4Sun4oWQfQmi.jpg","genre_ids":[80,28,53,35],"id":615457,"original_language":"en","original_title":"Nobody","overview":"Hutch Mansell, a suburban dad, overlooked husband, nothing neighbor — a \"nobody.\" When two thieves break into his home one night, Hutch's unknown long-simmering rage is ignited and propels him on a brutal path that will uncover dark secrets he fought to leave behind.","popularity":965.872,"poster_path":"/oBgWY00bEFeZ9N25wWVyuQddbAo.jpg","release_date":"2021-03-26","title":"Nobody","video":false,"vote_average":8.4,"vote_count":1955},{"adult":false,"backdrop_path":"/9ns9463dwOeo1CK1JU2wirL5Yi1.jpg","genre_ids":[35,10751,16],"id":587807,"original_language":"en","original_title":"Tom & Jerry","overview":"Tom the cat and Jerry the mouse get kicked out of their home and relocate to a fancy New York hotel, where a scrappy employee named Kayla will lose her job if she can’t evict Jerry before a high-class wedding at the hotel. Her solution? Hiring Tom to get rid of the pesky mouse.","popularity":627.252,"poster_path":"/8XZI9QZ7Pm3fVkigWJPbrXCMzjq.jpg","release_date":"2021-02-11","title":"Tom & Jerry","video":false,"vote_average":7.2,"vote_count":1466},{"adult":false,"backdrop_path":"/z8TvnEVRenMSTemxYZwLGqFofgF.jpg","genre_ids":[28,14,12],"id":458576,"original_language":"en","original_title":"Monster Hunter","overview":"A portal transports Cpt. Artemis and an elite unit of soldiers to a strange world where powerful monsters rule with deadly ferocity. Faced with relentless danger, the team encounters a mysterious hunter who may be their only hope to find a way home.","popularity":562.62,"poster_path":"/1UCOF11QCw8kcqvce8LKOO6pimh.jpg","release_date":"2020-12-03","title":"Monster Hunter","video":false,"vote_average":7,"vote_count":1716},{"adult":false,"backdrop_path":"/xXHZeb1yhJvnSHPzZDqee0zfMb6.jpg","genre_ids":[28,12,53],"id":385128,"original_language":"en","original_title":"F9","overview":"Dominic Toretto and his crew battle the most skilled assassin and high-performance driver they've ever encountered: his forsaken brother.","popularity":565.722,"poster_path":"/bOFaAXmWWXC3Rbv4u4uM9ZSzRXP.jpg","release_date":"2021-05-19","title":"F9","video":false,"vote_average":8.2,"vote_count":103},{"adult":false,"backdrop_path":"/ovggmAOu1IbPGTQE8lg4lBasNC7.jpg","genre_ids":[878,28,12,53],"id":412656,"original_language":"en","original_title":"Chaos Walking","overview":"Two unlikely companions embark on a perilous adventure through the badlands of an unexplored planet as they try to escape a dangerous and disorienting reality, where all inner thoughts are seen and heard by everyone.","popularity":464.611,"poster_path":"/9kg73Mg8WJKlB9Y2SAJzeDKAnuB.jpg","release_date":"2021-02-24","title":"Chaos Walking","video":false,"vote_average":7.1,"vote_count":717},{"adult":false,"backdrop_path":"/reDeoOvnih7Zv2xKXZAZL7w8KP6.jpg","genre_ids":[10751,14,16,35],"id":529203,"original_language":"en","original_title":"The Croods: A New Age","overview":"Searching for a safer habitat, the prehistoric Crood family discovers an idyllic, walled-in paradise that meets all of its needs. Unfortunately, they must also learn to live with the Bettermans -- a family that's a couple of steps above the Croods on the evolutionary ladder. As tensions between the new neighbors start to rise, a new threat soon propels both clans on an epic adventure that forces them to embrace their differences, draw strength from one another, and survive together.","popularity":470.747,"poster_path":"/tbVZ3Sq88dZaCANlUcewQuHQOaE.jpg","release_date":"2020-11-25","title":"The Croods: A New Age","video":false,"vote_average":7.5,"vote_count":2155},{"adult":false,"backdrop_path":"/7HtvmsLrDeiAgDGa1W3m6senpfE.jpg","genre_ids":[12,16,10751],"id":681260,"original_language":"en","original_title":"Maya the Bee: The Golden Orb","overview":"When Maya, a headstrong little bee, and her best friend Willi, rescue an ant princess they find themselves in the middle of an epic bug battle that will take them to strange new worlds and test their friendship to its limits.","popularity":414.403,"poster_path":"/tMS2qcbhbkFpcwLnbUE9o9IK4HH.jpg","release_date":"2021-01-07","title":"Maya the Bee: The Golden Orb","video":false,"vote_average":6.6,"vote_count":35},{"adult":false,"backdrop_path":"/PGSknIQZ96l7MG8nyQ76MuYnfY.jpg","genre_ids":[16,35,10751,14],"id":508943,"original_language":"en","original_title":"Luca","overview":"In a beautiful seaside town on the Italian Riviera, two young boys experience an unforgettable summer filled with gelato, pasta and endless scooter rides. But all the fun is threatened by a deeply-held secret: they are sea monsters from another world just below the water’s surface.","popularity":336.888,"poster_path":"/7rhzEufovmmUqVjcbzMHTBQ2SCG.jpg","release_date":"2021-06-17","title":"Luca","video":false,"vote_average":0,"vote_count":0},{"adult":false,"backdrop_path":"/vfuzELmhBjBTswXj2Vqxnu5ge4g.jpg","genre_ids":[53,80],"id":602269,"original_language":"en","original_title":"The Little Things","overview":"Deputy Sheriff Joe \"Deke\" Deacon joins forces with Sgt. Jim Baxter to search for a serial killer who's terrorizing Los Angeles. As they track the culprit, Baxter is unaware that the investigation is dredging up echoes of Deke's past, uncovering disturbing secrets that could threaten more than his case.","popularity":265.274,"poster_path":"/tLO1aD1ghdtVMT32z2sRmzgYKYd.jpg","release_date":"2021-01-28","title":"The Little Things","video":false,"vote_average":6.4,"vote_count":897},{"adult":false,"backdrop_path":"/yuxdzbQHEecWGOvaXeEYVtIyAfn.jpg","genre_ids":[878,27],"id":515454,"original_language":"en","original_title":"Come True","overview":"Looking for an escape from her recurring nightmares, 18-year-old Sarah submits to a university sleep study, but soon realizes she's become the conduit to a frightening new discovery.","popularity":197.595,"poster_path":"/hGPGRRz6FTIRed1zestdWrV2Iwd.jpg","release_date":"2021-03-12","title":"Come True","video":false,"vote_average":5.8,"vote_count":55},{"adult":false,"backdrop_path":"/sOA1ubMAQ6dCIrjoFIEDt3FCxFf.jpg","genre_ids":[878,10749,53],"id":597890,"original_language":"en","original_title":"Voyagers","overview":"With the future of the human race at stake, a group of young men and women -- bred for intelligence and obedience -- embark on an expedition to colonize a distant planet. When they uncover disturbing secrets about the mission, they defy their training and begin to explore their most primitive natures. As life on the ship descends into chaos, they soon become consumed by fear, lust and an insatiable hunger for power.","popularity":183.512,"poster_path":"/gn2vCmWO7jQBBto9SYuBHYZARaU.jpg","release_date":"2021-04-08","title":"Voyagers","video":false,"vote_average":6.5,"vote_count":129},{"adult":false,"backdrop_path":"/nN4Gs3vZAOJ1D6FRtrwbU9VGYwU.jpg","genre_ids":[16,10749,10751],"id":486589,"original_language":"en","original_title":"Red Shoes And The Seven Dwarfs","overview":"Princes who have been turned into Dwarfs seek the red shoes of a lady in order to break the spell, although it will not be easy.","popularity":139.933,"poster_path":"/MBiKqTsouYqAACLYNDadsjhhC0.jpg","release_date":"2019-07-25","title":"Red Shoes And The Seven Dwarfs","video":false,"vote_average":7.7,"vote_count":716}],"total_pages":16,"total_results":320}
      const result = {
        kind: "ok",
        movies: response.results
      }

      if (result.kind === "ok") {
        self.saveUpcomingMovies(result.movies)
      } else {
        __DEV__ && console.tron.log(result.kind)
      }
    },
  }))

type MovieStoreType = Instance<typeof MovieStoreModel>
export interface MovieStore extends MovieStoreType {}
type MovieStoreSnapshotType = SnapshotOut<typeof MovieStoreModel>
export interface MovieStoreSnapshot extends MovieStoreSnapshotType {}
export const createMovieStoreDefaultModel = () => types.optional(MovieStoreModel, {})
